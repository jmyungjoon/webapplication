<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <link rel="stylesheet" href="style.css">
  <!-- google authentication -->
  <meta name="google-signin-client_id" content="721638147870-5h0p2mlg88l3u6hgb1grg9a72gcpu8st.apps.googleusercontent.com">
  <script src="https://apis.google.com/js/platform.js" async defer></script>
  <style>
    #move {
      display: inline-block;
      transition: all 500ms cubic-bezier(0.680, -0.550, 0.265, 1.550);
      transition-timing-function: cubic-bezier(0.680, -0.550, 0.265, 1.550);
    }
    #move:active {
      transform: translate(-10px,-10px);
    }
    .g-signin2 {
      display: inline-block;
      align-content: center;
    }
  </style>
  <script>
    document.cookie = "safeCookie1=foo; SameSite=Lax";
    document.cookie = "safeCookie2=foo";
    document.cookie = "crossCookie=bar; SameSite=None; Secure";
    function onSignIn(googleUser) {
      var profile = googleUser.getBasicProfile();
      console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
      console.log('Name: ' + profile.getName());
      console.log('Image URL: ' + profile.getImageUrl());
      console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.
      console.log(profile.getId());
      log_id = profile.getId();
      if(log_id != "") { 
        func_confirm();
        } else { }
      }
      function func_confirm(){
                if(confirm('You are loged in Google Account. Do you want use it?')){
                  window.location.href = "index.php";
                } else {
                }
            }
  </script>
</head>
<body>
  <div class="container-fluid" >
  <header class="jumbotron text-center">
    <a href = "http://ittcserver.com"><img src="ittc.jpeg" alt="life coding" class="border border-success rounded-circle" id="logo" ></a>
    <h1><a href="index.html">WEB Application</a></h1>
  </header>
  <div id="control" class="jumbotron text-center" style="width: 300px ; margin:auto;">
  <form id="login_form" autocomplete="on" method="post">
    <input type="text" name="id" id="id" placeholder="ID" autofocus class="form-control" style = "margin-bottom: 10px;">
    <input type="password" name="password" id = "password" autocomplete="off" placeholder="PASSWORD" class="form-control" style = "margin-bottom: 10px;">
    <input type="submit" id = "move" class="btn btn-info btn-lg" value="LOG IN" >
    <h6>or</h6>
  </form>
  <div class="g-signin2" data-onsuccess="onSignIn"></div>
</div>
</div>
 
<!-- <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script> -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>  
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

<script>  
  $(document).ready(function(){
      $('#login_form').on("submit", function(event){  
      event.preventDefault();  
      if($('#id').val() == ""){  
          alert("Name is required");  
      }  
      else if($('#password').val() == ''){  
          alert("password is required");  
      } else {  
          $.ajax({  
              url:"login.php",
              method:"POST", 
              dataType:'json',  
              data:$('#login_form').serialize(),  
              beforeSend:function(){  
                  $('#move').val("Submitting");  
              },  
              success:function(data){
                  $('#login_form')[0].reset(); 
                  if(data['data'] == true){
                    location.replace("index.php"); 
                  }  else { 
                    var r = confirm(" Wrong name or password! Or you are not signed up.\n Do you want to sign up?");
                    if(r == true) { 
                      location.replace("/index.php");
                    } else {
                      location.replace("index.html");
                     }
                  }
              }
          });  
      }  
      });
  });
</script>
</body>
</html>
